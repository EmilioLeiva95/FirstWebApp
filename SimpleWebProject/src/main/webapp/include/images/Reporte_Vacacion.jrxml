<?xml version="1.0" encoding="ISO-8859-1"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Reporte_Vacacion " language="groovy" pageWidth="612" pageHeight="792" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ff96fc8e-0c8f-4f13-900a-e611a13e80bd">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="48"/>
	<style name="table" style="table 1" mode="Opaque" forecolor="#999999" backcolor="#000014">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1" mode="Transparent" forecolor="#CCCCCC" backcolor="#090B1C" fill="Solid" radius="2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#FFF8DC">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#FFF2BF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="DataSet_Vacacion" uuid="f15ededc-eb70-4050-9241-e65cb59eba54">
		<parameter name="fech_desde" class="java.lang.String"/>
		<parameter name="fech_hasta" class="java.lang.String"/>
		<parameter name="departamento" class="java.lang.String"/>
		<parameter name="pais" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT U.NOMBRE, U.APELLIDO,
IF(DAY(NOW()) > DAY(A.FEC_HASTA),
'100%'
,
IF(DAY(NOW()) < DAY(A.FEC_DESDE), '0%',
CONCAT(TRUNCATE(
(DATEDIFF(NOW(), DATE_FORMAT(A.FEC_desde, '%Y/%m/%d'))*100)/(DATEDIFF(DATE_FORMAT(A.FEC_HASTA, '%Y/%m/%d'), DATE_FORMAT(A.FEC_DESDE, '%Y/%m/%d')))
, 0),'%')
)
) AS PORCENTAJE_LIBRADO
FROM AUSENCIA A INNER JOIN EMPLEADO E ON E.ID_EMPLEADO = A.ID_EMPLEADO
                 INNER JOIN USUARIO U  ON U.ID_USUARIO = E.ID_USUARIO
                 INNER JOIN DEPARTAMENTO D ON D.ID_DEPARTAMENTO = E.ID_DEPARTAMENTO
                 INNER JOIN OFICINA O ON O.ID_OFICINA = D.ID_OFICINA
                 INNER JOIN PAIS P ON P.ID_PAIS = O.ID_PAIS
WHERE MONTH(NOW()) = MONTH(A.FEC_DESDE) AND A.ID_CAT_MOTIVO = 9 AND A.ID_TIPO_AUSENCIA = 9
AND P.DESCRIPCION = $P{pais} AND D.DESCRIPCION = $P{departamento} AND A.FEC_DESDE BETWEEN STR_TO_DATE($P{fech_desde},'%m/%d/%Y') and STR_TO_DATE($P{fech_hasta},'%m/%d/%Y')]]>
		</queryString>
		<field name="NOMBRE" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="APELLIDO" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="PORCENTAJE_LIBRADO" class="java.lang.String"/>
	</subDataset>
	<parameter name="_departamento" class="java.lang.String"/>
	<parameter name="_pais" class="java.lang.String"/>
	<parameter name="_fec_desde" class="java.lang.String"/>
	<parameter name="_fec_hasta" class="java.lang.String"/>
	<parameter name="ruta_imagen" class="java.lang.String"/>
	<queryString>
		<![CDATA[]]>
	</queryString>
	<field name="NOMBRE" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="APELLIDO" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PORCENTAJE_LIBRADO" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="92" splitType="Stretch">
			<staticText>
				<reportElement x="104" y="42" width="369" height="37" uuid="6e6c926d-9a13-4873-86c7-37563b80761f"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte General de Vacaciones  de Empleado ACF]]></text>
			</staticText>
			<image>
				<reportElement x="508" y="0" width="64" height="43" uuid="bc1d6347-e7e7-449c-b614-b68b6b627c43"/>
				<imageExpression><![CDATA[$P{ruta_imagen}]]></imageExpression>
			</image>
		</band>
	</title>
	<pageHeader>
		<band height="107" splitType="Stretch">
			<staticText>
				<reportElement x="25" y="12" width="98" height="20" uuid="0688c529-a310-4a79-8f6e-7ad3b391b735"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Departamento :]]></text>
			</staticText>
			<staticText>
				<reportElement x="25" y="32" width="31" height="20" uuid="3d756fbe-d4a1-4740-9a73-001186ab4114"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[PaÃ­s :]]></text>
			</staticText>
			<staticText>
				<reportElement x="25" y="52" width="202" height="20" uuid="1efec618-04c0-4e29-b761-6a9a131bccf8"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte generado a partir de :]]></text>
			</staticText>
			<textField>
				<reportElement x="118" y="15" width="100" height="20" uuid="934553b5-f935-427e-8cb9-ed5df28db4b6"/>
				<textFieldExpression><![CDATA[$P{_departamento}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="61" y="35" width="100" height="20" uuid="94dc8e8e-c9b6-41e8-9924-08bdd0d17cb6"/>
				<textFieldExpression><![CDATA[$P{_pais}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="201" y="57" width="100" height="20" uuid="2629bb56-9430-449d-aa1d-0660ed0becc3"/>
				<textFieldExpression><![CDATA[$P{_fec_desde}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="253" y="53" width="36" height="19" uuid="18a1d2bf-7b15-4d72-941d-26f282937d54"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[hasta: ]]></text>
			</staticText>
			<textField>
				<reportElement x="295" y="56" width="100" height="20" uuid="a9718835-63a6-415d-9ff4-f9a01ba77671"/>
				<textFieldExpression><![CDATA[$P{_fec_hasta}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="105" splitType="Stretch">
			<componentElement>
				<reportElement key="table 1" x="0" y="0" width="572" height="105" uuid="14054b7c-c3a3-4dac-9359-5333b12a637a"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="DataSet_Vacacion" uuid="8b0021b7-44ce-4117-b455-0b78e13e6efb">
						<datasetParameter name="departamento">
							<datasetParameterExpression><![CDATA[$P{_departamento}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="pais">
							<datasetParameterExpression><![CDATA[$P{_pais}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="fech_hasta">
							<datasetParameterExpression><![CDATA[$P{_fec_hasta}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="fech_desde">
							<datasetParameterExpression><![CDATA[$P{_fec_desde}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="195" uuid="d571b2aa-1d62-41cd-910a-a6a51bae0359">
						<jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="195" height="30" uuid="ae720331-e214-4add-9cc9-febc7a797365"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="10" isBold="true"/>
								</textElement>
								<text><![CDATA[Nombre ]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 1_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="195" height="20" uuid="44b81f44-9cc4-473f-9486-e691b5098dbe"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{NOMBRE}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="192" uuid="913f4b27-16dd-451f-a6ac-42e1eb8a1d07">
						<jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="192" height="30" uuid="85a9b464-3783-493b-ad44-c32b6be7e83a"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="10" isBold="true"/>
								</textElement>
								<text><![CDATA[Apellido]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 1_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="192" height="20" uuid="ecd9ddb3-389b-42d7-8167-d81109dc8213"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{APELLIDO}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="185" uuid="2361c243-07be-4d3f-9ed4-1144a77e04a3">
						<jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="185" height="30" uuid="83ede6c6-2a5c-4830-83a6-426140b3688a"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="10" isBold="true"/>
								</textElement>
								<text><![CDATA[Porcentaje Librado ]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 1_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="1" y="0" width="184" height="20" uuid="5abcfa60-67e3-4bae-b14f-d21dce0c7cb4"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{PORCENTAJE_LIBRADO}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</columnHeader>
	<detail>
		<band height="125" splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
