<?xml version="1.0" encoding="ISO-8859-1"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reporte_viajes" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6b592273-b98c-44ae-87a7-034bf976644a">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="DataSet_Viaje" uuid="d8d47fe8-ffdb-44d0-b7ed-150260c4417e">
		<parameter name="departamento" class="java.lang.String"/>
		<parameter name="pais" class="java.lang.String"/>
		<parameter name="fech_desde" class="java.lang.String"/>
		<parameter name="fech_hasta" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT U.NOMBRE, U.APELLIDO, EV.DESCRIPCION,
CONCAT('A partir de ', CONCAT(EV.FECHA_DESDE, CONCAT(' al ', EV.FECHA_HASTA))) AS PERIODO,
CASE EV.ESTADO_SOLICITUD
        WHEN 'R' THEN 'Registrada'
        WHEN 'S' THEN 'Solicitud de Autorización'
        WHEN 'A' THEN 'Autorizada'
        WHEN 'P' THEN 'En Proceso'
        WHEN 'L' THEN 'Liquidada'
        WHEN 'C' THEN 'Cancelada'
    ELSE 'Estado no Valido'
END AS ESTADO_SOLICITUD,
EV.MTO_TOT_ESTIMADO, EV.MTO_EST_VIATICO, C.DESCRIPCION AS CLIENTE
FROM USUARIO U INNER JOIN EMPLEADO E ON U.ID_USUARIO = E.ID_USUARIO
                INNER JOIN ENC_VIAJE EV ON E.ID_EMPLEADO = EV.ID_EMPLEADO
                INNER JOIN DET_VIAJE DV ON EV.ID_ENC_VIAJE = DV.ID_ENC_VIAJE
                INNER JOIN CLIENTE C ON C.ID_CLIENTE = DV.ID_CLIENTE
                INNER JOIN DEPARTAMENTO D ON D.ID_DEPARTAMENTO = E.ID_DEPARTAMENTO
                INNER JOIN OFICINA O ON O.ID_OFICINA = D.ID_OFICINA
                INNER JOIN PAIS P ON P.ID_PAIS = O.ID_PAIS
WHERE P.DESCRIPCION = $P{pais} AND D.DESCRIPCION = $P{departamento}
AND EV.FECHA_DESDE BETWEEN STR_TO_DATE($P{fech_desde},'%m/%d/%Y') and STR_TO_DATE($P{fech_hasta},'%m/%d/%Y')]]>
		</queryString>
		<field name="NOMBRE" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="APELLIDO" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="DESCRIPCION" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="PERIODO" class="java.lang.String"/>
		<field name="ESTADO_SOLICITUD" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="MTO_TOT_ESTIMADO" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="MTO_EST_VIATICO" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="CLIENTE" class="java.lang.String"/>
	</subDataset>
	<parameter name="_pais" class="java.lang.String"/>
	<parameter name="_departamento" class="java.lang.String"/>
	<parameter name="_fec_desde" class="java.lang.String"/>
	<parameter name="_fec_hasta" class="java.lang.String"/>
	<parameter name="url_image" class="java.lang.String"/>
	<parameter name="fecha_actual" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="102" splitType="Stretch">
			<staticText>
				<reportElement x="197" y="58" width="390" height="37" uuid="e47475dd-10de-46f8-97a1-4472af47f160"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte General de detalle de Viajes Realizados ACF ]]></text>
			</staticText>
			<image>
				<reportElement x="669" y="0" width="64" height="43" uuid="54786664-f93d-48bc-b0df-b6ae6a92e6b1"/>
				<imageExpression><![CDATA[$P{url_image}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="652" y="43" width="100" height="20" uuid="09c4eee7-8527-46c8-bd8d-f84e0a138bca"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{fecha_actual}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="113" splitType="Stretch">
			<staticText>
				<reportElement x="10" y="14" width="98" height="20" uuid="9c237886-870e-486e-a419-fc3bc8b4809f"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Departamento :]]></text>
			</staticText>
			<staticText>
				<reportElement x="10" y="34" width="31" height="20" uuid="0763ea7b-33bf-45ed-9c35-60588139bdba"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[País :]]></text>
			</staticText>
			<staticText>
				<reportElement x="10" y="54" width="170" height="20" uuid="026f921f-70f6-48fc-b612-e6bb48e9b00a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Viajes Realizados a partir de: ]]></text>
			</staticText>
			<textField>
				<reportElement x="104" y="15" width="100" height="20" uuid="db61be16-892c-4e09-bcf4-b5cc0c87f913"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{_departamento}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="43" y="34" width="100" height="20" uuid="0cb34f93-f3a8-495a-817a-c197c9eb51d9"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{_pais}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="180" y="54" width="81" height="20" uuid="11800d8a-5d6f-46c8-8259-096fe8a84207"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{_fec_desde}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="272" y="55" width="79" height="20" uuid="edbbe159-8487-428c-9a96-653c01c3dbd5"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{_fec_hasta}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="232" y="55" width="36" height="19" uuid="3a241fe5-8ebd-4d70-b21a-c5268f18242a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[hasta: ]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="182" splitType="Stretch">
			<componentElement>
				<reportElement key="table" style="table" x="0" y="0" width="752" height="182" uuid="c14f3b14-dab0-4789-be9c-7ecc1768b4d8"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="DataSet_Viaje" uuid="e466a5b6-4f8b-4942-b809-e43ba72898f3">
						<datasetParameter name="departamento">
							<datasetParameterExpression><![CDATA[$P{_departamento}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="pais">
							<datasetParameterExpression><![CDATA[$P{_pais}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="fech_desde">
							<datasetParameterExpression><![CDATA[$P{_fec_desde}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="fech_hasta">
							<datasetParameterExpression><![CDATA[$P{_fec_hasta}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="90" uuid="0b06d45e-cce2-4880-9331-cbfbc6cd3e11">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="d5c73c32-3930-486f-8780-5b798f7930b6"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Nombre]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="40" uuid="45d9654d-86ae-4ad4-8aa5-1a337d0889a4"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{NOMBRE}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="64ebc56b-4a06-43d6-b70f-c9abf2b2e50b">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="ef6ae14a-0525-48ef-ae18-822ac0d1b047"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Apellido]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="40" uuid="8320e59a-8ca0-4d4d-9dca-97457b714184"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{APELLIDO}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="06b29a1c-3b2d-487d-8809-c239cce1da9e">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="7a67c705-1bdf-4619-b60a-dcaaedc6774b"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Descripción del Viaje]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="42" uuid="21746bb4-3d34-4f68-af54-3be8ffccd677"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{DESCRIPCION}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="115" uuid="de523779-1a87-4f09-998f-e98df28d745a">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="115" height="30" uuid="498953f2-569c-45af-a7a6-ad48725d6b63"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Periodo]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="115" height="42" uuid="8c83d71a-8bdd-45a8-9edc-297017a54af0"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{PERIODO}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="5226d9e6-ed6c-4d5b-b216-f16b89d21c22">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="9dcb46bf-c0e3-44c3-8400-19f4d5bd988e"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Estado de Viaticos]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="40" uuid="08783f3e-5fc6-4ea4-bfd3-7aeca85b6c62"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{ESTADO_SOLICITUD}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="77" uuid="46472861-d8bb-438f-963f-1964a24016ad">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="77" height="30" uuid="b298b0ff-7521-41af-be01-648adbacc02a"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Costo del Viaje]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="77" height="40" uuid="c5e64eda-53e1-4a9f-8319-734dd89d96b2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{MTO_TOT_ESTIMADO}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="76" uuid="e5e30854-dd99-4970-b89e-813409792225">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="76" height="30" uuid="8f3fb3d7-6275-4ac2-a01c-1b067cab398d"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Monto de Viáticos]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="76" height="40" uuid="3804dfc1-8f2d-4fda-ab3d-9a77890ac17d"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{MTO_EST_VIATICO}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="118" uuid="be714f08-cfdc-4139-a286-e3f19616955a">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="118" height="30" uuid="e725c41d-a4c2-42eb-8ab5-c64782dccb28"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Cliente]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="42" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="118" height="40" uuid="6f8def60-256e-40ca-bd9f-f822e0d6e0e6"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{CLIENTE}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</columnHeader>
	<detail>
		<band height="125" splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
