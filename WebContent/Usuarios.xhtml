<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

	<style type="text/css">
.ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
	text-align: center;
	color: white;
}

.ui-widget-content {
	border: none;
}

.roundButton {
	border-radius: 15px;
	margin-top: 4%;
}
</style>
	<!-- Header del bloque Usuarios -->
	<p:panelGrid columns="3" layout="grid">
		<p:commandButton value="Agregar" type="button" class="roundButton"
			onclick="PF('userDialog').show()" title="Agregar usuario"
			update=":dialogSave">
		</p:commandButton>
		<h1>USUARIOS</h1>
	</p:panelGrid>

	<!-- Tabla de datos de usuarios -->
	<h:form id="formTable" style="padding:0.5%;">
		<p:dataTable var="user" value="#{usuarios.listUsers}">
			<p:column headerText="ID" style="width:20px">
				<h:outputText value="#{user.id_user}" />
			</p:column>
			<p:column headerText="Nombre" style="width:200px">
				<h:outputText value="#{user.nombre}" />
			</p:column>
			<p:column headerText="Apellido" style="width:200px;">
				<h:outputText value="#{user.apellido}" />
			</p:column>
			<p:column headerText="Username"
				style="width:100px;text-align: center">
				<h:outputText value="#{user.username}" />
			</p:column>
			<p:column headerText="Correo" style="width:200px">
				<h:outputText value="#{user.email}" />
			</p:column>
			<p:column headerText="Fecha Creación"
				style="width:100px;text-align: center">
				<h:outputText value="#{user.fecha_creacion}" />
			</p:column>
			<p:column headerText="Ultimo Inicio"
				style="width:100px;text-align: center">
				<h:outputText value="#{user.last_login}" />
			</p:column>
			<p:column headerText="Estado" style="width:50px;text-align: center">
				<h:outputText value="#{user.estado}" />
			</p:column>
			<p:column style="width:100px;text-align: center">
				<p:commandButton
					actionListener="#{usuarios.getItemUser(user.id_user)}"
					update=":dialogForm" oncomplete="PF('userDialogUpdate').show()"
					title="View" value="Editar">
				</p:commandButton>
			</p:column>
		</p:dataTable>
	</h:form>

	<p:dialog header="Información de usuario" widgetVar="userDialogUpdate"
		height="360" width="380" resizable="false">
		<p:outputPanel id="dialogForm" style="text-align:center;">
			<h:form>
				<p:panelGrid columns="2" layout="grid"
					columnClasses="ui-g-12 ui-md-6 ui-lg-3, ui-g-12 ui-md-6 ui-lg-3, ui-g-12 ui-md-6 ui-lg-3, ui-g-12 ui-md-6 ui-lg-3">

					<h:outputLabel value="Nombre" />
					<p:inputText value="#{usuarios.users.nombre}" required="true" />

					<h:outputLabel value="Apellido" />
					<p:inputText value="#{usuarios.users.apellido}" required="true" />

					<h:outputLabel value="Correo" />
					<p:inputText value="#{usuarios.users.email}" required="true" />

					<h:outputLabel value="Username" />
					<p:inputText value="#{usuarios.users.username}" required="true" />

					<h:outputLabel value="Password" />
					<p:inputText value="#{usuarios.users.password}" required="true" />

					<h:outputLabel value="Estado" />
					<p:inputText value="#{usuarios.users.estado}" required="true" />

					<p:commandButton title="View" value="Actualizar"
						style="margin-left:50px;margin-top:20px;"
						action="#{usuarios.updateUser(usuarios.users.id_user)}"
						oncomplete="PF('userDialogUpdate').hide();" update=":formTable">
					</p:commandButton>

					<p:commandButton title="View" value="Eliminar"
						style="margin-left:100px;margin-top:20px;"
						action="#{usuarios.deleteUser(usuarios.users.id_user)}"
						oncomplete="PF('userDialogUpdate').hide();" update=":formTable">
					</p:commandButton>
				</p:panelGrid>
			</h:form>
		</p:outputPanel>
	</p:dialog>

	<h:form>
		<p:dialog header="Información de usuario" widgetVar="userDialog"
			height="250" width="380" focus="name" resizable="false">
			<p:outputPanel id="dialogSave" style="text-align:center;">
				<p:panelGrid columns="2" layout="grid"
					columnClasses="ui-g-12 ui-md-6 ui-lg-3, ui-g-12 ui-md-6 ui-lg-3, ui-g-12 ui-md-6 ui-lg-3, ui-g-12 ui-md-6 ui-lg-3">

					<h:outputLabel value="Nombre" />
					<p:inputText id="name" value="#{usuarios.nombre}" required="true" />

					<h:outputLabel value="Apellido" />
					<p:inputText value="#{usuarios.apellido}" required="true" />

					<h:outputLabel value="Correo" />
					<p:inputText value="#{usuarios.email}" required="true" />

					<h:outputLabel value="Username" />
					<p:inputText value="#{usuarios.username}" required="true" />

					<h:outputLabel value="Password" />
					<p:inputText value="#{usuarios.password}" required="true" />

					<p:commandButton title="View" value="Guardar"
						action="#{usuarios.saveUser}"
						oncomplete="PF('userDialog').hide();" update=":formTable">
					</p:commandButton>
				</p:panelGrid>
			</p:outputPanel>
		</p:dialog>
	</h:form>
</ui:composition>
